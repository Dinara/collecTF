{% extends "base.html" %}

{% block content %}

<div class="container">
  
  <p><a href="{% url browseapp.search.search %}" class="btn btn-primary"><i class="icon-double-angle-left"></i> Try a new search!</a></p>

  {% if reports %}
  
  <p><a class="block_before_load" href="#" onclick="$('#view_all').submit(); return false;">Combined report</a></p>

  <div id="report_table" class="boxed">
    <table class="table table-condensed table-striped">
      <thead>
        <th>TF</th>
        <th>Species</th>
        <th>Report

	  <form style="display:inline;" method="post" action="{% url browseapp.view_results.view_results %}" id="view_all" action="">
	    {% csrf_token %}
	    <input type="hidden" name="motif_csi_list" value="{% for csi_pk in view_all_csis %}{{ csi_pk }}{% if not forloop.last %},{% endif %}{% endfor %}">
	    <input type="hidden" name="non_motif_csi_list" value="{% for ncsi_pk in view_all_ncsis %}{{ ncsi_pk }}{% if not forloop.last %},{% endif %}{% endfor %}">
	  </form>
        </th>
      </thead>
      <tbody>
        {% for report in reports %}
        <tr>
          <td>{{ report.TF_name }}</td>
	  <td>{{ report.species_name }}</td>
	  {% with form_id=report.TF_name|slugify|add:'_'|add:report.species_name|slugify %}
	  <td><a href="#" onclick="$('#{{ form_id }}').submit();">view</a>
	    <form action="{% url browseapp.view_results.view_results %}" method="post" style="display:inline;" id={{ form_id }}>{% csrf_token %}
	      <input type="hidden" name="motif_csi_list" value="{% for csi_pk in report.csi_list %}{{ csi_pk }}{% if not forloop.last %},{% endif %}{% endfor %}"/>
	      <input type="hidden" name="non_motif_csi_list" value="{% for ncsi_pk in report.non_motif_csi_list %}{{ ncsi_pk }}{% if not forloop.last %},{% endif %}{% endfor %}"/>
	    </form>
	  </td>
	  {% endwith %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  No result was found.
  {% endif %}
</div>

{% endblock %}
